---
server:
  address: ""
  port: 8080
  timeout: 1000
  tls_private_key: stoke-private.key
  tls_public_cert: stoke-public.crt

database:
  type: sqlite
  sqlite:
    file: stoke.db
    flags: "cache=shared&_fk=1"

logging:
  level: debug
  log_file: stoke.log
  pretty_stdout: true
  write_to_stdout: true

tokens:
  algorithm: ECDSA
  num_bits: 256
  persist_keys: true
  key_duration: 3h
  token_duration: 30m
  issuer: "stk"
#  subject: "ath"
#  audience: ["users"]
#  include_issued_at: yes
#  include_not_before: yes
  user_info:
    full_name: "n"
    username: "u"
    email: "e"
#    first_name: "fn"
#    last_name: "ln"

telemetry:
  trace_provider: grpc
  trace_export_url: https://localhost:4317
  trace_insecure: true

  # Set this to anything but http/grpc to only use the internal prometheus endpoint
  metric_provider: prometheus_only
#  metric_export_url: https://localhost:4317
#  metric_insecure: false

users:
  enable_ldap: true
  server_url: ldap://localhost:10389
  bind_user_dn: "cn=admin,dc=planetexpress,dc=com"
  bind_user_password: GoodNewsEveryone

  group_search_root: "ou=people,dc=planetexpress,dc=com"
  group_filter_template: "(&(objectClass=group)(member={{ .UserDN }}))"
  ldap_group_name_field: "cn"

  user_search_root: "ou=people,dc=planetexpress,dc=com"
  user_filter_template: "(|(&(objectClass=inetOrgPerson)(uid={{ .Username }}))(&(objectClass=inetOrgPerson)(mail={{ .Username }})))"
  ldap_first_name_field: "givenName"
  ldap_last_name_field:  "sn"
  ldap_email_field: "mail"

  search_timeout: 0
  skip_certificate_verification: true

